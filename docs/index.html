<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>U.S. Presidential Election State Results</title>
<link rel="stylesheet" href="styles.css" />
<link rel="icon" href="favicon.svg" />
</head>
<body>
<div class="container">
  <div class="header">
    <h1>U.S. Presidential Election State Results</h1>
    <span class="legend">Click a state to open its page</span>
  </div>
  <div class="grid">
    <div class="card">
      <div id="map-wrap" class="center">
        <svg id="map" width="100%" viewBox="0 0 975 610" aria-label="U.S. map"></svg>
      </div>
    </div>
    <div class="card">
        <h2 style="margin-top:0">State Links</h2>
        <!-- Top line: National quick link -->
        <div class="small-links" id="top-links">
          <a class="btn" href="state/NAT.html">NATIONAL</a>
        </div>
        <!-- Second line: small states populated by the map script -->
        <div class="small-links" id="small-links">
          <!-- small-state buttons inserted here by the map script -->
        </div>
        <!-- Third: Expanded state links (categorized into 4 columns) -->
        <div id="state-links"><div style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px"><div class="card" style="padding:8px"><a class="btn" href="state/AK.html">AK</a><a class="btn" href="state/CA.html">CA</a><a class="btn" href="state/DE.html">DE</a><a class="btn" href="state/IA.html">IA</a><a class="btn" href="state/KS.html">KS</a><a class="btn" href="state/MD.html">MD</a><a class="btn" href="state/MO.html">MO</a><a class="btn" href="state/ND.html">ND</a><a class="btn" href="state/NM.html">NM</a><a class="btn" href="state/OK.html">OK</a><a class="btn" href="state/SC.html">SC</a><a class="btn" href="state/UT.html">UT</a><a class="btn" href="state/WI.html">WI</a></div><div class="card" style="padding:8px"><a class="btn" href="state/AL.html">AL</a><a class="btn" href="state/CO.html">CO</a><a class="btn" href="state/FL.html">FL</a><a class="btn" href="state/ID.html">ID</a><a class="btn" href="state/KY.html">KY</a><a class="btn" href="state/ME-AL.html">ME</a><a class="btn" href="state/MS.html">MS</a><a class="btn" href="state/NE-AL.html">NE</a><a class="btn" href="state/NV.html">NV</a><a class="btn" href="state/OR.html">OR</a><a class="btn" href="state/SD.html">SD</a><a class="btn" href="state/VA.html">VA</a><a class="btn" href="state/WV.html">WV</a></div><div class="card" style="padding:8px"><a class="btn" href="state/AR.html">AR</a><a class="btn" href="state/CT.html">CT</a><a class="btn" href="state/GA.html">GA</a><a class="btn" href="state/IL.html">IL</a><a class="btn" href="state/LA.html">LA</a><a class="btn" href="state/MI.html">MI</a><a class="btn" href="state/MT.html">MT</a><a class="btn" href="state/NH.html">NH</a><a class="btn" href="state/NY.html">NY</a><a class="btn" href="state/PA.html">PA</a><a class="btn" href="state/TN.html">TN</a><a class="btn" href="state/VT.html">VT</a><a class="btn" href="state/WY.html">WY</a></div><div class="card" style="padding:8px"><a class="btn" href="state/AZ.html">AZ</a><a class="btn" href="state/DC.html">DC</a><a class="btn" href="state/HI.html">HI</a><a class="btn" href="state/IN.html">IN</a><a class="btn" href="state/MA.html">MA</a><a class="btn" href="state/MN.html">MN</a><a class="btn" href="state/NC.html">NC</a><a class="btn" href="state/NJ.html">NJ</a><a class="btn" href="state/OH.html">OH</a><a class="btn" href="state/RI.html">RI</a><a class="btn" href="state/TX.html">TX</a><a class="btn" href="state/WA.html">WA</a></div></div></div>
      <hr/>
      <p class="legend">Tip: Maine and Nebraska’s statewide pages include links to their district pages.</p>
    </div>
  </div>
  <footer>Site by eigentaylor.<br />Special thanks to Kiernan Park-Egan for providing Kenneth Black's congressional district presidential data.<br />Please report any innaccuracies to tayloreigenfisher@gmail.com ·
  Built as static HTML from CSV. D3 + us-atlas map is loaded from CDNs.<br />
  Last updated: 2025-09-11 09:04 UTC</footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<script src="https://cdn.jsdelivr.net/npm/topojson-client@3"></script>
<script>
const FIPS_TO_ABBR = {
  "01":"AL","02":"AK","04":"AZ","05":"AR","06":"CA","08":"CO","09":"CT","10":"DE","11":"DC",
  "12":"FL","13":"GA","15":"HI","16":"ID","17":"IL","18":"IN","19":"IA","20":"KS","21":"KY","22":"LA",
  "23":"ME","24":"MD","25":"MA","26":"MI","27":"MN","28":"MS","29":"MO","30":"MT","31":"NE","32":"NV",
  "33":"NH","34":"NJ","35":"NM","36":"NY","37":"NC","38":"ND","39":"OH","40":"OK","41":"OR","42":"PA",
  "44":"RI","45":"SC","46":"SD","47":"TN","48":"TX","49":"UT","50":"VT","51":"VA","53":"WA","54":"WV",
  "55":"WI","56":"WY"
};
const SMALL_STATES = ['DC', 'DE', 'RI', 'CT', 'NJ', 'MD', 'MA', 'VT', 'NH'];

const svg = d3.select("#map");
const g = svg.append("g");
// Use an Albers USA projection so geographic coordinates from us-atlas
// are projected into the SVG viewBox correctly.
const projection = d3.geoAlbersUsa().scale(1300).translate([975/2, 610/2]);
const path = d3.geoPath().projection(projection);

fetch("https://cdn.jsdelivr.net/npm/us-atlas@3/states-10m.json")
  .then(r => r.json())
  .then(us => {
    const states = topojson.feature(us, us.objects.states).features;

    g.selectAll("path.state")
      .data(states)
      .join("path")
      .attr("class", "state")
      .attr("d", path)
      /* Slightly brighter default fill for better contrast */
      .attr("fill", "#2f2f2f")
      /* Slightly lighter stroke so state boundaries remain visible */
      .attr("stroke", "#5a5a5a")
      .attr("stroke-width", 0.8)
      .attr("tabindex", 0)
      /* Use the page accent color on hover for a more vibrant highlight */
      .on("mouseover", function() { d3.select(this).attr("fill", "#66b3ff"); })
      .on("mouseout",  function() { d3.select(this).attr("fill", "#2f2f2f"); })
      .on("click", (event, d) => {
        const abbr = FIPS_TO_ABBR[String(d.id).padStart(2,"0")];
        // For ME and NE we want the statewide page which is named ME-AL/NE-AL
        if (abbr === "ME" || abbr === "NE") {
          window.location.href = "state/" + abbr + ".html";
        } else if (abbr) {
          window.location.href = "state/" + abbr + ".html";
        }
      })
      .append("title")
      .text(d => {
        const abbr = FIPS_TO_ABBR[String(d.id).padStart(2,"0")];
        return abbr ? abbr : "Unknown";
      });

    // Small state buttons
    const links = d3.select("#small-links");
    SMALL_STATES.forEach(abbr => {
      links.append("a")
        .attr("class","btn")
        .attr("href","state/" + abbr + ".html")
        .text(abbr);
    });
  });
</script>
</body>
</html>
