<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>U.S. Presidential Election State Results</title>
<link rel="stylesheet" href="styles.css" />
<link rel="icon" href="favicon.svg" />
</head>
<body>
<div class="container" style="text-align: center;">
  <div class="card site-header" style="display:flex;justify-content:space-between;align-items:center;padding:8px"><div class="small-links"><a class="btn" href="./index.html">Home</a><a class="btn" href="./ranker.html">Ranker</a><a class="btn" href="./presidential_margins.html">Data</a></div><div class="legend">U.S. Presidential Election State Results 1960-2024</div></div>
  <div class="header">
  <h1>U.S. Presidential Election State Results 1960-2024</h1>
    <span class="legend">Click a state to open its page</span>
  </div>
  <div class="grid">
    <div class="card">
      <div id="map-wrap" class="center">
        <svg id="map" width="100%" viewBox="0 0 975 610" aria-label="U.S. map"></svg>
  <div id="mapTip" style="display:none"></div>
      </div>
      <hr style="margin:12px 0" />
<div id="tester" class="center" style="margin-top:8px">
  <div style="display:grid;gap:10px">
    <div>
      <label for="yearSlider">Year:</label>
      <input id="yearSlider" type="range" min="1960" max="2024" step="4" value="2024" />
      <span id="yearVal" style="margin-left:8px">2024</span>
    </div>
    <div>
      <div style="display:flex;gap:10px;align-items:center">
        <label for="pvSlider" style="min-width:150px">PV (Nat. Margin):</label>
        <input id="pvSlider" type="range" min="0" max="1" step="1" value="0" list="pvStopsList" style="flex:1" />
        <span id="pvVal">EVEN</span>
      </div>
      <datalist id="pvStopsList"></datalist>
    </div>
    <div id="evBar" style="height:18px;border:1px solid var(--border);border-radius:9px;position:relative;background:#111">
      <div id="evFillD" style="position:absolute;left:0;top:0;bottom:0;background:#4169E1;border-radius:9px 0 0 9px;width:0%"></div>
      <div id="evFillO" style="position:absolute;top:0;bottom:0;background:#C9A400;width:0%"></div>
      <div id="evFillR" style="position:absolute;right:0;top:0;bottom:0;background:#B22222;border-radius:0 9px 9px 0;width:0%"></div>
      <div id="evMid" style="position:absolute;left:50%;top:-6px;bottom:-6px;width:2px;background:var(--border)"></div>
      <div id="evText" style="position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)">D 0 | O 0 | R 0</div>
    </div>
    <div id="pvTotals" class="pv-totals">
      <div class="pv-badge pv-d"><span class="label">Dem</span><span id="pvDem" class="num">0</span></div>
      <div class="pv-badge pv-o"><span class="label">Other</span><span id="pvOth" class="num">0</span></div>
      <div class="pv-badge pv-r"><span class="label">Rep</span><span id="pvRep" class="num">0</span></div>
      <div class="pv-badge pv-total"><span class="label">Total</span><span id="pvTot" class="num">0</span></div>
    </div>
    <div class="legend" style="font-size:0.95rem;margin-bottom:6px">Flip scenarios (min votes)</div>
    <div class="flip-controls">
      <button id="flipClassic" class="btn">Flip winner</button>
      <button id="flipNoMaj" class="btn">Break majority</button>
      <button id="flipReset" class="btn">Reset flips</button>
    </div>
    <div class="flip-summary">
      <div class="flip-badge"><span class="label">Votes changed</span><span id="flipVotes" class="num">0</span></div>
      <div class="flip-badge"><span class="label">% of total</span><span id="flipVotesPct" class="num">0%</span></div>
      <div class="flip-badge"><span class="label">States flipped</span><span id="flipCount" class="num">0</span></div>
      <div class="flip-badge"><span class="label">EC</span><span id="flipEC" class="num">0 - 0</span></div>
    </div>
    <div id="flipDetailsWrap" class="card" style="margin-top:8px;display:none">
      <div class="legend" style="text-align:left">Applied flips (winner by minimal votes to switch):</div>
      <div class="table-wrap">
        <table class="flip-table">
          <thead><tr><th>State</th><th>EV</th><th>D old</th><th>R old</th><th>D new</th><th>R new</th><th>Δ votes</th></tr></thead>
          <tbody id="flipDetails"></tbody>
        </table>
      </div>
    </div>
    <div id="pvStops" class="legend" style="font-size:0.95rem"></div>
    <div id="testerExplain" class="legend" style="font-size:0.95rem;text-align:left;color:var(--muted)"><b>How this works:</b> We measure a state's relative margin as the difference between its presidential margin and the national presidential margin. A state with a relative margin of +5% is 5 points more Democratic than the nation as a whole, while a state with -3% is 3 points more Republican than the nation. By shifting the national presidential margin (PV) we can estimate how many electoral votes each party would win if the national popular vote were different. The EV bar above shows the estimated electoral vote split for the selected PV.<br /><br />We only capped the maximum PV shift to ±60% to allow for particularly unrealistic scenarios (despite the days of a 20-point landslide being long gone). Since 1968, the largest PV margin was 23.1% in 1972, even Reagan never cracked 20% in his historic 1984 landslide. Since 1984, no candidate has surpassed a 10% margin. But if you want to see what a D+52.1 margin might look like, be my guest! Democrats are always going to have more than 3 electoral votes due to D.C.<br /><br /><b>Note:</b> This is a simplified model that assumes uniform swing across all states and does not account for factors like turnout changes, demographic shifts, or unique state-level dynamics. It is intended for illustrative purposes only. The assumption of a uniform swing is a significant simplification, but is slightly more reasonable for modern elections where we have a relatively common national zeitgeist.<br /><br /><i>Note on 1968:</i> A few states had a strong showing by third-party candidate George Wallace, which complicates the uniform swing assumption. We assume the national swing applies purely to the D and R votes, and that Wallace's vote share remains constant. Thus, some of these states actually have two tipping points: usually pushing a Wallace win into a D/R win, but in the case of TN, pushing an R win into a Wallace win and then into a D win.<br /><br />While a few states like Alabama and Mississippi are solidly Wallace territory (no national swing could change his plurality there), and other states like GA and LA require massive 30-50+ swings, other states like AR and TN have more reasonable tipping points.<br /><br /><b>Flip scenarios</b> are computed by solving a knapsack problem to find the minimum number of popular votes needed to flip enough states to change the electoral college outcome (either to produce a new winner or to simply break the majority the original winner had). We choose the solution based on the minimum number of votes needed to flip (rather than the minimum number of states flipped). For example: in 2004, if Kerry had won Ohio, he would have won the presidency. But that would have actually required slightly more votes than flipping NM, IA, NV, and NE-02 combined, so the latter is the solution shown here.</div>
  </div>
</div>
    </div>
    <div class="card">
        <h2 style="margin-top:0">State Links</h2>
        <!-- Top line: National quick link -->
        <div class="small-links" id="top-links" style="padding: 4px; align-items: center; justify-content: center; display: flex;">
          <a class="btn" href="state/NAT.html">NATIONAL</a>
        </div>
        <!-- Second line: small states populated by the map script -->
        <div class="small-links" id="small-links" style="padding: 2px; align-items: center; justify-content: center; display: flex;">
          <!-- small-state buttons inserted here by the map script -->
        </div>
        <!-- Third: Expanded state links (categorized into 4 columns) -->
        <div id="state-links"><div style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px;padding:8px 0"><div class="card" style="padding:8px"><div class="small-links" style="justify-content:center"><a class="btn" href="state/AK.html">AK</a><a class="btn" href="state/CA.html">CA</a><a class="btn" href="state/DE.html">DE</a><a class="btn" href="state/IA.html">IA</a><a class="btn" href="state/KS.html">KS</a><a class="btn" href="state/MD.html">MD</a><a class="btn" href="state/MO.html">MO</a><a class="btn" href="state/ND.html">ND</a><a class="btn" href="state/NM.html">NM</a><a class="btn" href="state/OK.html">OK</a><a class="btn" href="state/SC.html">SC</a><a class="btn" href="state/UT.html">UT</a><a class="btn" href="state/WI.html">WI</a></div></div><div class="card" style="padding:8px"><div class="small-links" style="justify-content:center"><a class="btn" href="state/AL.html">AL</a><a class="btn" href="state/CO.html">CO</a><a class="btn" href="state/FL.html">FL</a><a class="btn" href="state/ID.html">ID</a><a class="btn" href="state/KY.html">KY</a><a class="btn" href="state/ME.html">ME</a><a class="btn" href="state/MS.html">MS</a><a class="btn" href="state/NE.html">NE</a><a class="btn" href="state/NV.html">NV</a><a class="btn" href="state/OR.html">OR</a><a class="btn" href="state/SD.html">SD</a><a class="btn" href="state/VA.html">VA</a><a class="btn" href="state/WV.html">WV</a></div></div><div class="card" style="padding:8px"><div class="small-links" style="justify-content:center"><a class="btn" href="state/AR.html">AR</a><a class="btn" href="state/CT.html">CT</a><a class="btn" href="state/GA.html">GA</a><a class="btn" href="state/IL.html">IL</a><a class="btn" href="state/LA.html">LA</a><a class="btn" href="state/MI.html">MI</a><a class="btn" href="state/MT.html">MT</a><a class="btn" href="state/NH.html">NH</a><a class="btn" href="state/NY.html">NY</a><a class="btn" href="state/PA.html">PA</a><a class="btn" href="state/TN.html">TN</a><a class="btn" href="state/VT.html">VT</a><a class="btn" href="state/WY.html">WY</a></div></div><div class="card" style="padding:8px"><div class="small-links" style="justify-content:center"><a class="btn" href="state/AZ.html">AZ</a><a class="btn" href="state/DC.html">DC</a><a class="btn" href="state/HI.html">HI</a><a class="btn" href="state/IN.html">IN</a><a class="btn" href="state/MA.html">MA</a><a class="btn" href="state/MN.html">MN</a><a class="btn" href="state/NC.html">NC</a><a class="btn" href="state/NJ.html">NJ</a><a class="btn" href="state/OH.html">OH</a><a class="btn" href="state/RI.html">RI</a><a class="btn" href="state/TX.html">TX</a><a class="btn" href="state/WA.html">WA</a></div></div></div></div>
      <hr/>
      <p class="legend">Tip: Maine and Nebraska’s pages include links to pages for their districts.</p>
    </div>
  </div>
  <footer>Site by eigentaylor.<br />
Data (possibly incorrectly scraped) from Wikipedia.<br /> 
Please report any innaccuracies to me through discord: eigentaylor ·
  Built as static HTML from CSV. D3 + us-atlas map is loaded from CDNs.<br />
  Last updated: 2025-09-18 06:21 UTC</footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<script src="https://cdn.jsdelivr.net/npm/topojson-client@3"></script>
<script src="tester.js"></script>
<script>
const FIPS_TO_ABBR = {
  "01":"AL","02":"AK","04":"AZ","05":"AR","06":"CA","08":"CO","09":"CT","10":"DE","11":"DC","12":"FL","13":"GA","15":"HI","16":"ID","17":"IL","18":"IN","19":"IA","20":"KS","21":"KY","22":"LA","23":"ME","24":"MD","25":"MA","26":"MI","27":"MN","28":"MS","29":"MO","30":"MT","31":"NE","32":"NV","33":"NH","34":"NJ","35":"NM","36":"NY","37":"NC","38":"ND","39":"OH","40":"OK","41":"OR","42":"PA","44":"RI","45":"SC","46":"SD","47":"TN","48":"TX","49":"UT","50":"VT","51":"VA","53":"WA","54":"WV","55":"WI","56":"WY"
};
const SMALL_STATES = ['DC', 'DE', 'RI', 'CT', 'NJ', 'MD', 'MA', 'VT', 'NH'];

const svg = d3.select("#map");
const g = svg.append("g");
// Use an Albers USA projection so geographic coordinates from us-atlas
// are projected into the SVG viewBox correctly.
const projection = d3.geoAlbersUsa().scale(1300).translate([975/2, 610/2]);
const path = d3.geoPath().projection(projection);
// expose projection/path and top-level group so external scripts can draw overlays
window.mapProjection = projection;
window.mapPath = path;
window.mapG = g;

fetch("https://cdn.jsdelivr.net/npm/us-atlas@3/states-10m.json")
  .then(r => r.json())
  .then(us => {
    const states = topojson.feature(us, us.objects.states).features;

  const tip = document.getElementById('mapTip');
  g.selectAll("path.state")
      .data(states)
      .join("path")
      .attr("class", "state")
      .attr("id", d => {
        const abbr = FIPS_TO_ABBR[String(d.id).padStart(2,"0")];
        return abbr ? `state-${abbr}` : null;
      })
      .attr("d", path)
      /* Slightly brighter default fill for better contrast */
      .attr("fill", "#2f2f2f")
      /* Slightly lighter stroke so state boundaries remain visible */
      .attr("stroke", "#5a5a5a")
      .attr("stroke-width", 0.8)
      .attr("tabindex", 0)
      /* On hover: pick a bright blue or red depending on the current fill and restore it on mouseout */
    .on("mouseover", function(event, d) {
        const sel = d3.select(this);
        const cur = sel.attr('fill') || '#2f2f2f';
        // stash the original fill so we can restore it on mouseout
        sel.attr('data-orig-fill', cur);
        try {
          const hex = (cur && cur[0] === '#') ? cur.slice(1) : cur;
          const r = parseInt(hex.slice(0,2),16) || 0;
          const g = parseInt(hex.slice(2,4),16) || 0;
          const b = parseInt(hex.slice(4,6),16) || 0;
      // if it's already yellow (1968 plurality), keep yellow; else if the color is redder than bluer, use bright red, otherwise bright blue
      const isYellow = (cur.toLowerCase && cur.toLowerCase() === '#ffd700');
      const highlight = isYellow ? '#FFD700' : ((r > b) ? '#ff6666' : '#66b3ff');
          sel.attr('fill', highlight);
        } catch (e) {
          sel.attr('fill', '#66b3ff');
        }
        // show tooltip
        try {
          const abbr = FIPS_TO_ABBR[String(d.id).padStart(2,"0")];
          if (abbr) {
            const info = (window.getAdjustedInfo ? window.getAdjustedInfo(abbr) : null) || {};
            const ev = (info && info.ev != null) ? info.ev : '';
            const marginStr = (info && info.marginStr) ? info.marginStr : '';
            tip.textContent = abbr + (ev!=='' ? ` · ${ev} EV` : '') + (marginStr ? ` · ${marginStr}` : '');
            tip.style.display = 'block';
            // position right away
            const rect = this.ownerSVGElement.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            tip.style.left = (rect.left + x) + 'px';
            tip.style.top = (rect.top + y) + 'px';
          }
        } catch(e) {}
      })
      .on("mousemove", function(event, d){
        try {
          if (!tip || tip.style.display === 'none') return;
          const rect = this.ownerSVGElement.getBoundingClientRect();
          const x = event.clientX - rect.left;
          const y = event.clientY - rect.top;
          tip.style.left = (rect.left + x) + 'px';
          tip.style.top = (rect.top + y) + 'px';
        } catch(e) {}
      })
      .on("mouseout",  function() {
        const sel = d3.select(this);
        const orig = sel.attr('data-orig-fill') || '#2f2f2f';
        sel.attr('fill', orig);
        sel.attr('data-orig-fill', null);
        if (tip) tip.style.display = 'none';
      })
      .on("click", (event, d) => {
        const abbr = FIPS_TO_ABBR[String(d.id).padStart(2,"0")];
        // Open state page in a new tab. For ME and NE we want the statewide page which is named ME-AL/NE-AL
        if (abbr === "ME" || abbr === "NE") {
          window.open("state/" + abbr + ".html", '_blank');
        } else if (abbr) {
          window.open("state/" + abbr + ".html", '_blank');
        }
      })
      .append("title")
      .text(d => {
        const abbr = FIPS_TO_ABBR[String(d.id).padStart(2,"0")];
        return abbr ? abbr : "Unknown";
      });

    // Small state buttons
    const links = d3.select("#small-links");
    SMALL_STATES.forEach(abbr => {
      links.append("a")
        .attr("class","btn")
        .attr("href","state/" + abbr + ".html")
        .text(abbr);
    });
  // Notify listeners that the map has rendered
  window.dispatchEvent(new Event("mapReady"));
  });
</script>
</body>
</html>
